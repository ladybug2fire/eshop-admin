<div class="box box-primary">
  <div class="box-header with-border">
    <h3 class="box-title">发布商品</h3>
  </div>
  <!-- /.box-header -->
  <!-- form start -->
  <form role="form" id="goodForm" action="/admin/good/upload" method="POST" enctype="multipart/form-data">
    <div class="box-body">
      <div class="form-group">
        <label for="goodname">商品名</label>
        <input type="text" class="form-control" id="goodname" placeholder="商品名" name="goodname">
      </div>
      <div class="form-group">
        <label for="price">售价</label>
        <input type="number" class="form-control" id="price" placeholder="售价" name="price">
      </div>
      <div class="form-group">
        <label for="specify">规格</label>
        <input type="text" class="form-control" id="specify" placeholder="如：500g/袋" name="specify">
      </div>
      <div class="form-group">
        <label for="cat">分类</label>
        <select class="form-control" id="cat" name="cat">
          <option>进口水果</option>
          <option>国产水果</option>
          <option>精选肉类</option>
          <option>禽类蛋品</option>
          <option>海鲜水产</option>
          <option>即烹美食</option>
          <option>乳品糕点</option>
          <option>新鲜蔬菜</option>
          <option>方便素食</option>
          <option>粮油杂货</option>
        </select>
      </div>
      <div class="form-group">
        <label for="desc">简介</label>
        <textarea class="form-control" id="desc" placeholder="简介" name="desc"></textarea>
      </div>
      <div class="form-group">
        <label for="goodpost">上传图片</label>
        <input type="file" id="goodpost" name="file">
        <p class="help-block"></p>
      </div>
    </div>
    <!-- /.box-body -->

    <div class="box-footer">
      <button type="button" onclick="submitData()" class="btn btn-primary">创建</button>
    </div>
  </form>
</div>

<script>
  var submitData = function () {
    var data = new FormData($('#goodForm')[0]);
    $.ajax(
      {
        type: "POST",
        dataType: "json",
        url: "/admin/good/upload",
        contentType: false,
        processData: false,
        data,
        success: function (result) {
          if (result.code == 200) {
            setTimeout(()=>{
              window.location.href = "/admin/good/"
            }, 1000)
          }
        },
        error: function () {
          alert("异常！");
        }
      })
  }
</script>